# /export

完成した原稿をエクスポートします（Episode単位対応版）。

## 使用方法

```bash
/export [--format=<format>] [--type=<type>]
```

## オプション

- `--format=<format>` - 出力形式（デフォルト: md）
  - `md` - Markdown形式
  - `txt` - プレーンテキスト形式

- `--type=<type>` - エクスポートタイプ（デフォルト: full）
  - `full` - 全話を結合した完全版
  - `episodes` - Episode単位のファイル一覧確認

## 動作

### full エクスポート（デフォルト）

1. `workspace/current/idea.json` からタイトルを取得
2. `output/episodes/` の全話ファイルをスキャン
3. 話番号順にソートして結合
4. `output/manuscript.md`（または `.txt`）に出力

### episodes 確認

1. `output/episodes/` の全ファイルをリスト表示
2. 各話の文字数とステータスを表示

## 出力形式（full）

```markdown
# {タイトル}

## 第一章「{章タイトル}」

### 第1話「{話タイトル}」

{第1話の本文}

---

### 第2話「{話タイトル}」

{第2話の本文}

---

## 第二章「{章タイトル}」

### 第5話「{話タイトル}」

{第5話の本文}

...
```

## エラー処理

- `output/episodes/` が存在しない場合:
  ```
  エクスポート可能なエピソードがありません。
  /folio コマンドで執筆を開始してください。
  ```

- Episode ファイルが存在しない場合:
  ```
  警告: エピソードファイルが見つかりません（スキップします）
  ```

- `idea.json` が存在しない場合:
  ```
  エラー: idea.json が見つかりません。
  /folio コマンドでプロジェクトを初期化してください。
  ```

## 実装例

```bash
# Markdown形式で全話を結合してエクスポート（デフォルト）
/export

# テキスト形式でエクスポート
/export --format=txt

# Episode 一覧を確認
/export --type=episodes
```

## 期待される出力

### full エクスポート
```
原稿をエクスポートしています...

✓ タイトル: 「月面の記憶」
✓ 第一章「旅立ち」
  - 第1話「目覚め」（3,100字）
  - 第2話「出会い」（2,800字）
  - 第3話「決意」（3,200字）
  - 第4話「門出」（2,900字）
✓ 第二章「試練」
  - 第5話「嵐の前」（3,400字）
  - 第6話「対峙」（3,100字）

エクスポート完了: output/manuscript.md
総話数: 6話
総文字数: 18,500字
```

### episodes 確認
```
━━━ エピソード一覧 ━━━

第一章「旅立ち」
  ✓ 第1話「目覚め」 — 3,100字 — 確定
  ✓ 第2話「出会い」 — 2,800字 — 確定
  ✓ 第3話「決意」 — 3,200字 — 確定
  ✓ 第4話「門出」 — 2,900字 — 確定

第二章「試練」
  ✓ 第5話「嵐の前」 — 3,400字 — 確定
  ⏳ 第6話「対峙」 — 執筆中

━━━━━━━━━━━━━━━━━━━━━
確定: 5話 / 執筆中: 1話
総文字数: 15,400字（確定分）
```

## ファイル参照

- Episode ファイル: `output/episodes/第XX話_タイトル.md`
- 目次ファイル: `output/episodes/_index.md`
- キャラクター: `output/characters/`

## 関連コマンド

- `/folio` - 小説オーケストレーション開始
- `/status` - 進捗確認
- `/characters` - キャラクター一覧
- `/chapter-status` - 章の進捗確認
